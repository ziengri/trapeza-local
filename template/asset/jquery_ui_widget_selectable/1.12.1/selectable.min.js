(function(e){"function"===typeof define&&define.amd?define(["jquery","./mouse","../version","../widget"],e):e(jQuery)})(function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b.elementPos=e(b.element[0]).offset();b.selectees=
e(b.options.filter,b.element[0]);b._addClass(b.selectees,"ui-selectee");b.selectees.each(function(){var d=e(this),a=d.offset(),j=a.left-b.elementPos.left,a=a.top-b.elementPos.top;e.data(this,"selectable-item",{element:this,$element:d,left:j,top:a,right:j+d.outerWidth(),bottom:a+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,
"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(b){var d=this,a=this.options;this.opos=[b.pageX,b.pageY];this.elementPos=e(this.element[0]).offset();if(!this.options.disabled)this.selectees=e(a.filter,this.element[0]),this._trigger("start",b),e(a.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=
e.data(this,"selectable-item");a.startselected=!0;if(!b.metaKey&&!b.ctrlKey)d._removeClass(a.$element,"ui-selected"),a.selected=!1,d._addClass(a.$element,"ui-unselecting"),a.unselecting=!0,d._trigger("unselecting",b,{unselecting:a.element})}),e(b.target).parents().addBack().each(function(){var a,f=e.data(this,"selectable-item");if(f)return a=!b.metaKey&&!b.ctrlKey||!f.$element.hasClass("ui-selected"),d._removeClass(f.$element,a?"ui-unselecting":"ui-selected")._addClass(f.$element,a?"ui-selecting":
"ui-unselecting"),f.unselecting=!a,f.selecting=a,(f.selected=a)?d._trigger("selecting",b,{selecting:f.element}):d._trigger("unselecting",b,{unselecting:f.element}),!1})},_mouseDrag:function(b){this.dragged=!0;if(!this.options.disabled){var d,a=this,j=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;f>h&&(d=h,h=f,f=d);g>i&&(d=i,i=g,g=d);this.helper.css({left:f,top:g,width:h-f,height:i-g});this.selectees.each(function(){var c=e.data(this,"selectable-item"),d=!1,k,l,m,n;if(c&&c.element!==
a.element[0])if(k=c.left+a.elementPos.left,l=c.right+a.elementPos.left,m=c.top+a.elementPos.top,n=c.bottom+a.elementPos.top,"touch"===j.tolerance?d=!(k>h||l<f||m>i||n<g):"fit"===j.tolerance&&(d=k>f&&l<h&&m>g&&n<i),d){if(c.selected)a._removeClass(c.$element,"ui-selected"),c.selected=!1;if(c.unselecting)a._removeClass(c.$element,"ui-unselecting"),c.unselecting=!1;if(!c.selecting)a._addClass(c.$element,"ui-selecting"),c.selecting=!0,a._trigger("selecting",b,{selecting:c.element})}else{if(c.selecting)if((b.metaKey||
b.ctrlKey)&&c.startselected)a._removeClass(c.$element,"ui-selecting"),c.selecting=!1,a._addClass(c.$element,"ui-selected"),c.selected=!0;else{a._removeClass(c.$element,"ui-selecting");c.selecting=!1;if(c.startselected)a._addClass(c.$element,"ui-unselecting"),c.unselecting=!0;a._trigger("unselecting",b,{unselecting:c.element})}if(c.selected&&!b.metaKey&&!b.ctrlKey&&!c.startselected)a._removeClass(c.$element,"ui-selected"),c.selected=!1,a._addClass(c.$element,"ui-unselecting"),c.unselecting=!0,a._trigger("unselecting",
b,{unselecting:c.element})}});return!1}},_mouseStop:function(b){var d=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");d._removeClass(a.$element,"ui-unselecting");a.unselecting=!1;a.startselected=!1;d._trigger("unselected",b,{unselected:a.element})});e(".ui-selecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");d._removeClass(a.$element,"ui-selecting")._addClass(a.$element,"ui-selected");a.selecting=!1;a.selected=
!0;a.startselected=!0;d._trigger("selected",b,{selected:a.element})});this._trigger("stop",b);this.helper.remove();return!1}})});
