/**
 * https://github.com/marcj/css-element-queries
 *
 * !!! ElementQueries.js был изменён относительно базовой ветки в marcj !!!
 */
// ResizeSensor
(function(f,e){"function"===typeof define&&define.amd?define(e):"object"===typeof exports?module.exports=e():f.ResizeSensor=e()})("undefined"!==typeof window?window:this,function(){function f(a,c){var d=Object.prototype.toString.call(a),e=0,b=a.length;if("[object Array]"===d||"[object NodeList]"===d||"[object HTMLCollection]"===d||"[object Object]"===d||"undefined"!==typeof jQuery&&a instanceof jQuery||"undefined"!==typeof Elements&&a instanceof Elements)for(;e<b;e++)c(a[e]);else c(a)}function e(a){if(!a.getBoundingClientRect)return{width:a.offsetWidth,
height:a.offsetHeight};a=a.getBoundingClientRect();return{width:Math.round(a.width),height:Math.round(a.height)}}if("undefined"===typeof window)return null;var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return window.setTimeout(a,20)},g=function(a,c){function d(){var b=[];this.add=function(a){b.push(a)};var a,d;this.call=function(){a=0;for(d=b.length;a<d;a++)b[a].call()};this.remove=function(e){var c=[];a=0;for(d=b.length;a<d;a++)b[a]!==
e&&c.push(b[a]);b=c};this.length=function(){return b.length}}function h(b,a){if(b)if(b.resizedAttached)b.resizedAttached.add(a);else{b.resizedAttached=new d;b.resizedAttached.add(a);b.resizeSensor=document.createElement("div");b.resizeSensor.dir="ltr";b.resizeSensor.className="resize-sensor";b.resizeSensor.style.cssText="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";b.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
b.appendChild(b.resizeSensor);var c=window.getComputedStyle(b).getPropertyValue("position");"absolute"!==c&&"relative"!==c&&"fixed"!==c&&(b.style.position="relative");var f=b.resizeSensor.childNodes[0],g=f.childNodes[0],k=b.resizeSensor.childNodes[1],p,l,c=e(b),q=c.width,r=c.height,m=function(){var a=0===b.offsetWidth&&0===b.offsetHeight;if(a){var d=b.style.display;b.style.display="block"}g.style.width="100000px";g.style.height="100000px";f.scrollLeft=1E5;f.scrollTop=1E5;k.scrollLeft=1E5;k.scrollTop=
1E5;a&&(b.style.display=d)};b.resizeSensor.resetSensor=m;var h=function(){l=0;p&&(r=q=void 0,b.resizedAttached&&b.resizedAttached.call())},c=function(){var a=e(b),d=a.height;(p=a.width!=q||d!=r)&&!l&&(l=n(h));m()},t=function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d)};t(f,"scroll",c);t(k,"scroll",c);n(m)}}f(a,function(a){h(a,c)});this.detach=function(b){g.detach(a,b)};this.reset=function(){a.resizeSensor.resetSensor()}};g.reset=function(a,c){f(a,function(a){a.resizeSensor.resetSensor()})};
g.detach=function(a,c){f(a,function(a){if(a){if(a.resizedAttached&&"function"===typeof c&&(a.resizedAttached.remove(c),a.resizedAttached.length()))return;a.resizeSensor&&(a.contains(a.resizeSensor)&&a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)}})};return g});
// ElementQueries
(function(g,c){"function"===typeof define&&define.amd?define(["./ResizeSensor.js"],c):"object"===typeof exports?module.exports=c(require("./ResizeSensor.js")):(g.ElementQueries=c(g.ResizeSensor),g.ElementQueries.listen())})("undefined"!==typeof window?window:this,function(g){var c=function(){function c(a){a||(a=document.documentElement);a=window.getComputedStyle(a,null).fontSize;return parseFloat(a)||16}function q(a,b){var d=b.split(/\d/),d=d[d.length-1];b=parseFloat(b);switch(d){case "px":return b;
case "em":return b*c(a);case "rem":return b*c();case "vw":return b*document.documentElement.clientWidth/100;case "vh":return b*document.documentElement.clientHeight/100;case "vmin":case "vmax":return b*(0,Math["vmin"===d?"min":"max"])(document.documentElement.clientWidth/100,document.documentElement.clientHeight/100);default:return b}}function w(a,b){var d,r;this.element=a;var h,c,k,f,e,l,n,p=["min-width","min-height","max-width","max-height"];this.call=function(){var a=this.element;a.getBoundingClientRect?
(a=a.getBoundingClientRect(),d=Math.round(a.width),r=Math.round(a.height)):(d=a.offsetWidth,r=a.offsetHeight);e={};for(h in m[b])m[b].hasOwnProperty(h)&&(c=m[b][h],k=q(this.element,c.value),f="width"===c.property?d:r,n=c.mode+"-"+c.property,l="","min"===c.mode&&f>=k&&(l+=c.value),"max"===c.mode&&f<=k&&(l+=c.value),e[n]||(e[n]=""),l&&-1===(" "+e[n]+" ").indexOf(" "+l+" ")&&(e[n]+=" "+l));for(var g in p)p.hasOwnProperty(g)&&(e[p[g]]?this.element.setAttribute(p[g],e[p[g]].substr(1)):this.element.removeAttribute(p[g]))}}
function x(a,b){a.elementQueriesSetupInformation||(a.elementQueriesSetupInformation=new w(a,b));a.elementQueriesSensor||(a.elementQueriesSensor=new g(a,function(){a.elementQueriesSetupInformation.call()}));a.elementQueriesSetupInformation.call()}function y(a){var b;document.querySelectorAll&&(b=a?a.querySelectorAll.bind(a):document.querySelectorAll.bind(document));b||"undefined"===typeof $$||(b=$$);b||"undefined"===typeof jQuery||(b=jQuery);if(!b)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";
return b}function A(a){function b(){var b=!1,e;for(e in d)d.hasOwnProperty(e)&&c[e].minWidth&&a.offsetWidth>c[e].minWidth&&(b=e);b||(b=k);f!==b?m[b]?(d[f].style.display="none",d[b].style.display="block",f=b):(e=new Image,e.onload=function(){d[b].src=h[b];d[f].style.display="none";d[b].style.display="block";m[b]=!0;f=b},e.src=h[b]):d[b].src=h[b]}var d=[],c=[],h=[],k=0,f=-1,m=[],e;for(e in a.children)if(a.children.hasOwnProperty(e)&&a.children[e].tagName&&"img"===a.children[e].tagName.toLowerCase()){d.push(a.children[e]);
var l=a.children[e].getAttribute("min-width")||a.children[e].getAttribute("data-min-width"),n=a.children[e].getAttribute("data-src")||a.children[e].getAttribute("url");h.push(n);c.push({minWidth:l});l?a.children[e].style.display="none":(k=d.length-1,a.children[e].style.display="block")}f=k;a.resizeSensor=new g(a,b);b()}function B(){for(var a=y()("[data-responsive-image],[responsive-image]"),b=0,d=a.length;b<d;b++)A(a[b])}function t(a){var b,d,c;for(a=a.replace(/'/g,'"');null!==(b=C.exec(a));)for(/\s$/.test(b[1])&&
(b[1]+="*"),d=b[1]+b[3],b=b[2];null!==(c=D.exec(b));){var h=d,k=c[1],g=c[2];c=c[3];if("undefined"===typeof m[h]){m[h]=[];var q=u.length;f.innerHTML+="\n"+h+" {animation: 0.1s element-queries;}";f.innerHTML+="\n"+h+" > .resize-sensor {min-width: "+q+"px;}";u.push(h)}m[h].push({mode:k,property:g,value:c})}}function v(a){var b="";if(a)if("string"===typeof a)a=a.toLowerCase(),-1===a.indexOf("min-width")&&-1===a.indexOf("max-width")||t(a);else for(var d=0,c=a.length;d<c;d++)1===a[d].type?(b=a[d].selectorText||
a[d].cssText,-1!==b.indexOf("min-height")||-1!==b.indexOf("max-height")?t(b):-1===b.indexOf("min-width")&&-1===b.indexOf("max-width")||t(b)):4===a[d].type?v(a[d].cssRules||a[d].rules):3===a[d].type&&a[d].styleSheet.hasOwnProperty("cssRules")&&v(a[d].styleSheet.cssRules)}var f,m={},u=[],C=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,D=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi,z=!1;
this.init=function(){var a="animationstart";"undefined"!==typeof document.documentElement.style.webkitAnimationName?a="webkitAnimationStart":"undefined"!==typeof document.documentElement.style.MozAnimationName?a="mozanimationstart":"undefined"!==typeof document.documentElement.style.OAnimationName&&(a="oanimationstart");document.body.addEventListener(a,function(a){var b=a.target;if(-1!==window.getComputedStyle(b,null).getPropertyValue("animation-name").indexOf("element-queries")){b.elementQueriesSensor=
new g(b,function(){b.elementQueriesSetupInformation&&b.elementQueriesSetupInformation.call()});var c=window.getComputedStyle(b.resizeSensor,null).getPropertyValue("min-width"),c=parseInt(c.replace("px",""));x(a.target,u[c])}});z||(f=document.createElement("style"),f.type="text/css",f.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",f.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",
document.getElementsByTagName("head")[0].appendChild(f),z=!0);for(var a=0,b=document.styleSheets.length;a<b;a++)try{document.styleSheets[a].href&&0===document.styleSheets[a].href.indexOf("file://")&&console.log("CssElementQueries: unable to parse local css files, "+document.styleSheets[a].href),v(document.styleSheets[a].cssRules||document.styleSheets[a].rules||document.styleSheets[a].cssText)}catch(d){}B()};this.findElementQueriesElements=function(a){var b=y(a),c;for(c in m)if(m.hasOwnProperty(c))for(var k=
b(c,a),f=0,g=k.length;f<g;f++)x(k[f],c)};this.update=function(){this.init()}};c.update=function(){c.instance.update()};c.detach=function(c){c.elementQueriesSetupInformation?(c.elementQueriesSensor.detach(),delete c.elementQueriesSetupInformation,delete c.elementQueriesSensor):c.resizeSensor&&(c.resizeSensor.detach(),delete c.resizeSensor)};c.init=function(){c.instance||(c.instance=new c);c.instance.init()};var w=function(c){if(document.addEventListener)document.addEventListener("DOMContentLoaded",
c,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var g=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(c(),clearInterval(g))},10);else window.onload=c};c.findElementQueriesElements=function(g){c.instance.findElementQueriesElements(g)};c.listen=function(){w(c.init)};return c});
